# Motion & Interactions Document

## Overview

This document defines the motion design and interaction patterns for Gebeta, ensuring consistent, purposeful animations that enhance user experience while respecting performance constraints on low-end devices and supporting accessibility preferences.

---

## Motion Design Philosophy

### Purpose of Motion

**Motion should:**
- Guide user attention
- Provide feedback on actions
- Create continuity between states
- Communicate hierarchy and relationships
- Delight users without distracting

**Motion should NOT:**
- Slow down interactions
- Distract from content
- Confuse users
- Trigger vestibular disorders
- Drain battery on mobile devices

### Performance-First Motion

**Guidelines:**
- Use CSS transforms and opacity (hardware accelerated)
- Avoid animating layout properties (width, height, margin)
- Use `will-change` sparingly for complex animations
- Provide reduced motion alternatives
- Test on low-end devices

---

## Animation Principles

### 1. Timing

**Fast Duration:** 100-200ms
- Micro-interactions (buttons, toggles)
- Hover states
- Small UI changes

**Medium Duration:** 200-400ms
- Modal appearances
- List item additions
- Card transitions

**Slow Duration:** 400-600ms
- Page transitions
- Complex multi-step animations
- Enter/exit animations

### 2. Easing

**Standard Easing (ease-out):**
```css
transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
```

**Entrance Animations (ease-out):**
```css
transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
```

**Exit Animations (ease-in):**
```css
transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
```

**Bouncy Animation:**
```css
transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
```

### 3. Direction

**Horizontal Movement:** Left-to-right for entrances, right-to-left for exits
**Vertical Movement:** Bottom-to-top for entrances, top-to-bottom for exits
**Scale:** Subtle scale (0.95-1.05) for feedback

---

## CSS Animation Utilities

### Transition Classes

```css
/* Duration utilities */
.transition-fast { transition-duration: 150ms; }
.transition-normal { transition-duration: 200ms; }
.transition-slow { transition-duration: 300ms; }

/* Easing utilities */
.ease-out { transition-timing-function: cubic-bezier(0, 0, 0.2, 1); }
.ease-in { transition-timing-function: cubic-bezier(0.4, 0, 1, 1); }
.ease-in-out { transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); }
.ease-bounce { transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55); }

/* Property utilities */
.transition-all { transition-property: all; }
.transition-transform { transition-property: transform; }
.transition-opacity { transition-property: opacity; }
.transition-colors { transition-property: background-color, border-color, color, fill, stroke; }
```

### Animation Keyframes

```css
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(10px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideDown {
  from { 
    opacity: 0;
    transform: translateY(-10px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from { 
    opacity: 0;
    transform: translateX(100%);
  }
  to { 
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from { 
    opacity: 0;
    transform: scale(0.95);
  }
  to { 
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-20px); }
  60% { transform: translateY(-10px); }
}
```

### Animation Classes

```css
/* Fade animations */
.animate-fade-in { animation: fadeIn 200ms ease-out forwards; }
.animate-fade-out { animation: fadeOut 200ms ease-in forwards; }

/* Slide animations */
.animate-slide-up { animation: slideUp 200ms ease-out forwards; }
.animate-slide-down { animation: slideDown 200ms ease-out forwards; }
.animate-slide-in-right { animation: slideInRight 300ms ease-out forwards; }

/* Scale animations */
.animate-scale-in { animation: scaleIn 200ms ease-out forwards; }

/* Loading animations */
.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
.animate-spin { animation: spin 1s linear infinite; }

/* Feedback animations */
.animate-shake { animation: shake 400ms ease-in-out; }
.animate-bounce { animation: bounce 1s ease infinite; }

/* Hover animations */
.hover-scale:hover { transform: scale(1.02); }
.hover-lift:hover { transform: translateY(-2px); }
.hover-glow:hover { box-shadow: 0 0 20px rgba(16, 185, 129, 0.3); }

/* Focus animations */
.focus-ring:focus { 
  outline: none;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
}

/* Active animations */
.active-scale:active { transform: scale(0.98); }
.active-press:active { transform: scale(0.95); }
```

---

## Component Animations

### Button Interactions

```tsx
// Button with animations
function Button({ children, loading, ...props }) {
  return (
    <button
      className={`
        relative
        px-4 py-2
        rounded-lg
        font-medium
        transition-all duration-200
        ease-out
        hover:scale-[1.02]
        active:scale-[0.98]
        focus:outline-none
        focus:ring-2
        focus:ring-primary-500
        focus:ring-offset-2
        disabled:opacity-50
        disabled:cursor-not-allowed
        ${loading ? 'overflow-hidden' : ''}
      `}
      disabled={loading}
      {...props}
    >
      {/* Loading spinner */}
      {loading && (
        <span className="absolute inset-0 flex items-center justify-center">
          <svg
            className="animate-spin h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              className="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              strokeWidth="4"
            />
            <path
              className="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            />
          </svg>
        </span>
      )}
      
      {/* Button content */}
      <span className={loading ? 'invisible' : ''}>
        {children}
      </span>
    </button>
  );
}
```

### Card Hover Effects

```tsx
// Animated card component
function Card({ children, hover = true, className = '' }) {
  return (
    <div
      className={`
        bg-white
        rounded-xl
        border border-gray-200
        p-6
        transition-all duration-200
        ease-out
        ${hover ? 'hover:shadow-md hover:-translate-y-0.5' : ''}
        ${className}
      `}
    >
      {children}
    </div>
  );
}
```

### Modal Animations

```tsx
// Modal with animations
function Modal({ isOpen, onClose, title, children }) {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      {/* Backdrop */}
      <div
        className="fixed inset-0 bg-black/50 transition-opacity duration-200"
        onClick={onClose}
      />

      {/* Modal container */}
      <div className="flex min-h-full items-center justify-center p-4">
        {/* Modal panel */}
        <div
          className="relative bg-white rounded-xl shadow-xl max-w-lg w-full transform transition-all duration-200 ease-out scale-100 opacity-100"
          role="dialog"
          aria-modal="true"
        >
          {/* Header */}
          <div className="px-6 py-4 border-b border-gray-200">
            <h3 className="text-lg font-semibold">{title}</h3>
          </div>

          {/* Content */}
          <div className="px-6 py-4">
            {children}
          </div>
        </div>
      </div>
    </div>
  );
}
```

### Toast Notifications

```tsx
// Toast with animations
function Toast({ message, type = 'info', onClose }) {
  useEffect(() => {
    const timer = setTimeout(onClose, 5000);
    return () => clearTimeout(timer);
  }, [onClose]);

  const styles = {
    success: 'bg-green-50 border-green-200 text-green-800',
    error: 'bg-red-50 border-red-200 text-red-800',
    warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',
    info: 'bg-blue-50 border-blue-200 text-blue-800',
  };

  const icons = {
    success: <CheckCircleIcon className="w-5 h-5 text-green-500" />,
    error: <XCircleIcon className="w-5 h-5 text-red-500" />,
    warning: <ExclamationIcon className="w-5 h-5 text-yellow-500" />,
    info: <InformationIcon className="w-5 h-5 text-blue-500" />,
  };

  return (
    <div
      className={`
        ${styles[type]}
        flex items-center gap-3
        px-4 py-3
        rounded-lg
        border
        shadow-lg
        animate-slide-up
      `}
      role="alert"
    >
      {icons[type]}
      <span className="flex-1">{message}</span>
      <button
        onClick={onClose}
        className="p-1 hover:bg-black/5 rounded transition-colors"
      >
        <XIcon className="w-4 h-4" />
      </button>
    </div>
  );
}
```

### List Animations

```tsx
// Animated list item
function ListItem({ children, index }) {
  return (
    <li
      className="animate-slide-up"
      style={{ animationDelay: `${index * 50}ms` }}
    >
      {children}
    </li>
  );
}

// Usage
function MenuItemList({ items }) {
  return (
    <ul className="space-y-2">
      {items.map((item, index) => (
        <ListItem key={item.id} index={index}>
          <MenuItemCard item={item} />
        </ListItem>
      ))}
    </ul>
  );
}
```

### Loading Skeleton

```tsx
// Animated skeleton loader
function Skeleton({ className, variant = 'rect' }) {
  const variants = {
    rect: 'rounded',
    circle: 'rounded-full',
    text: 'rounded h-4',
  };

  return (
    <div
      className={`
        bg-gray-200
        animate-pulse
        ${variants[variant]}
        ${className}
      `}
    />
  );
}

// Usage
function MenuItemSkeleton() {
  return (
    <div className="space-y-3 animate-fade-in">
      <div className="flex gap-3">
        <Skeleton variant="rect" className="w-20 h-20" />
        <div className="flex-1 space-y-2">
          <Skeleton variant="rect" className="h-5 w-3/4" />
          <Skeleton variant="text" className="w-full" />
          <Skeleton variant="text" className="w-1/2" />
        </div>
      </div>
    </div>
  );
}
```

### Input Focus Effects

```tsx
// Animated input field
function Input({ label, error, ...props }) {
  return (
    <div className="relative">
      <label className="block text-sm font-medium text-gray-700 mb-1">
        {label}
      </label>
      <input
        className={`
          w-full
          px-4 py-2
          rounded-lg
          border
          bg-white
          transition-all duration-200
          ease-out
          focus:outline-none
          focus:ring-2
          focus:ring-primary-500
          focus:border-transparent
          disabled:bg-gray-100
          disabled:cursor-not-allowed
          ${error ? 'border-red-500 focus:ring-red-500' : 'border-gray-300'}
        `}
        {...props}
      />
      {error && (
        <p className="mt-1 text-sm text-red-500 animate-slide-down">
          {error}
        </p>
      )}
    </div>
  );
}
```

---

## Reduced Motion Support

### CSS Approach

```css
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-fade-in,
  .animate-fade-out,
  .animate-slide-up,
  .animate-slide-down,
  .animate-slide-in-right,
  .animate-scale-in {
    animation: none;
    opacity: 1;
    transform: none;
  }

  .hover-scale:hover,
  .hover-lift:hover,
  .hover-glow:hover {
    transform: none;
    box-shadow: none;
  }

  .active-scale:active,
  .active-press:active {
    transform: none;
  }
}
```

### React Approach

```tsx
import { useReducedMotion } from 'framer-motion';

function AnimatedComponent() {
  const shouldReduceMotion = useReducedMotion();

  const animation = shouldReduceMotion
    ? { opacity: 1, x: 0 }
    : {
        opacity: 0,
        x: -20,
        transition: { duration: 0.3 },
      };

  return (
    <motion.div animate={animation}>
      Content
    </motion.div>
  );
}
```

---

## Page Transitions

### Fade Transition

```tsx
// Page wrapper with fade transition
function PageTransition({ children }) {
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      transition={{ duration: 0.2 }}
    >
      {children}
    </motion.div>
  );
}

// Usage with React Router
function App() {
  return (
    <AnimatePresence>
      <Routes>
        <Route path="/" element={<PageTransition><Home /></PageTransition>} />
        <Route path="/menu" element={<PageTransition><Menu /></PageTransition>} />
        <Route path="/analytics" element={<PageTransition><Analytics /></PageTransition>} />
      </Routes>
    </AnimatePresence>
  );
}
```

### Slide Transition

```tsx
// Page with slide transition
function SlidePage({ children, direction = 1 }) {
  return (
    <motion.div
      initial={{ opacity: 0, x: direction * 20 }}
      animate={{ opacity: 1, x: 0 }}
      exit={{ opacity: 0, x: -direction * 20 }}
      transition={{ duration: 0.25, ease: 'easeOut' }}
    >
      {children}
    </motion.div>
  );
}
```

---

## Interaction Feedback

### Success Feedback

```tsx
// Success animation component
function SuccessCheckmark() {
  return (
    <motion.div
      initial={{ scale: 0 }}
      animate={{ scale: 1 }}
      transition={{ type: 'spring', stiffness: 200, damping: 15 }}
      className="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center"
    >
      <motion.svg
        initial={{ pathLength: 0 }}
        animate={{ pathLength: 1 }}
        transition={{ duration: 0.3, delay: 0.2 }}
        className="w-6 h-6 text-green-500"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        strokeWidth="3"
      >
        <motion.path d="M5 13l4 4L19 7" />
      </motion.svg>
    </motion.div>
  );
}
```

### Error Feedback

```tsx
// Error shake animation
function ErrorInput({ error }) {
  return (
    <motion.div
      animate={error ? { x: [-4, 4, -4, 4, 0] } : { x: 0 }}
      transition={{ duration: 0.4 }}
    >
      <Input error={error} />
    </motion.div>
  );
}
```

### Loading Spinner

```tsx
// Custom loading spinner
function LoadingSpinner({ size = 'md' }) {
  const sizes = {
    sm: 'w-4 h-4',
    md: 'w-6 h-6',
    lg: 'w-8 h-8',
  };

  return (
    <svg
      className={`animate-spin ${sizes[size]} text-primary-500`}
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle
        className="opacity-25"
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        strokeWidth="4"
      />
      <path
        className="opacity-75"
        fill="currentColor"
        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
      />
    </svg>
  );
}
```

---

## Accessibility Considerations

### Motion Safety

1. **Respect System Preferences:**
   - Always check `prefers-reduced-motion`
   - Provide alternatives to animated content
   - Never auto-play animations

2. **Provide Toggle:**
   - Allow users to disable animations
   - Store preference in localStorage
   - Sync across sessions

3. **Test with assistive technologies:**
   - Ensure animations don't interfere with screen readers
   - Test keyboard navigation during animations
   - Verify focus management

### Implementation

```tsx
// Motion preference toggle
function MotionSettings() {
  const [reducedMotion, setReducedMotion] = useState(
    window.matchMedia('(prefers-reduced-motion: reduce)').matches
  );

  const handleToggle = () => {
    const newValue = !reducedMotion;
    setReducedMotion(newValue);
    document.documentElement.classList.toggle('reduce-motion', newValue);
    localStorage.setItem('reduceMotion', String(newValue));
  };

  return (
    <Toggle
      label="Reduce motion"
      description="Minimize animations and transitions"
      checked={reducedMotion}
      onChange={handleToggle}
    />
  );
}
```

---

## Performance Guidelines

### Optimization Checklist

- [ ] Use `transform` and `opacity` only
- [ ] Avoid animating layout properties
- [ ] Use `will-change` sparingly
- [ ] Test on low-end devices
- [ ] Provide reduced motion alternatives
- [ ] Use CSS animations over JavaScript
- [ ] Batch DOM updates
- [ ] Use `requestAnimationFrame`

### Performance Testing

```javascript
// Performance monitoring
const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    if (entry.entryType === 'layout-shift' && !entry.hadRecentInput) {
      console.log('CLS:', entry.value);
    }
  }
});

observer.observe({ type: 'layout-shift', buffered: true });
```

---

## Document Metadata

- **Created:** 2025-02-04
- **Author:** SDLC Orchestrator
- **Phase:** Phase 2 - Architecture & Planning
- **Skill:** Motion Interactions (skill 8)
- **Status:** âœ… Complete
- **Next Phase:** Phase 3 - Build (skills 9-12)